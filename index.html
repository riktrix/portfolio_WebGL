<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.js"></script>
  <script src="https://unpkg.com/three@0.87.0/examples/js/loaders/OBJLoader.js"></script>
  <script src="https://unpkg.com/three@0.87.0/examples/js/loaders/MTLLoader.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', init);

    function init() {
      const width = 960;
      const height = 540;

      // レンダラーを作成
      const canvasElement = document.querySelector('#canvas');
      const renderer = new THREE.WebGLRenderer({
        canvas: document.querySelector('#canvas'),
        antialias: true,
        alpha: true 
      });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(width, height);

      const scene = new THREE.Scene();

      const camera = new THREE.PerspectiveCamera(45, width / height, 1, 10000);
      camera.position.set(5, 0, 15);

//       const geometry = new THREE.BoxGeometry(1, 1, 1);
//       const material = new THREE.MeshStandardMaterial({color: 0x0000FF});
//       const box = new THREE.Mesh(geometry, material);
//       scene.add(box);
      
      const mtlloader = new THREE.MTLLoader();
      mtlloader.setPath('model/E-45-Aircraft/');
      mtlloader.load('E 45 Aircraft_obj.mtl',function(materials){

          materials.preload();

          const objloader = new THREE.OBJLoader();
          objloader.setPath('model/E-45-Aircraft/');
          objloader.setMaterials(materials);
          objloader.load('E 45 Aircraft_obj.obj',function (object){

//               object.position.y = 0;
              object.rotation.x = Math.PI / 6;
              scene.add(object);

          }); 
      });
      
      function Skybox(scene, height) {

        const textureLoader = new THREE.TextureLoader()

        var geometry = new THREE.CubeGeometry(3000, 3000, 3000)

        var cubeMaterials = 
        [
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
          new THREE.MeshBasicMaterial({ map: textureLoader.load("model/space.png"), side: THREE.DoubleSide }),
        ]
        var material = new THREE.MeshFaceMaterial(cubeMaterials)

        var cube = new THREE.Mesh(geometry, material)

        cube.rotation.x = Math.PI / 2;
        cube.position.z = -1490;
        // bg.position.y = 1000;

        scene.add(cube)

      }

      const light = new THREE.DirectionalLight(0xFFFFFF, 2);
      light.position.set(1, 1, 1);
      scene.add(light);

      // 初回実行
      tick();

      function tick() {
        requestAnimationFrame(tick);

        // // 箱を回転させる
        // box.rotation.x += 0.01;
        // box.rotation.z += 0.01;

        // レンダリング
        renderer.render(scene, camera);
      }
    }
  </script>
</head>
<body>
  <canvas id="canvas"></canvas>
</body>
</html>
